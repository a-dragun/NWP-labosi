<%- include('../partials/header', { title: 'Edit Project' }) %>

<h1 style="text-align:center;">Edit Project</h1>

<form action="/projects/<%= project._id %>" method="POST" class="project-form">
  <label>Project Name:</label>
  <input type="text" name="name" value="<%= project.name %>" required>

  <label>Description:</label>
  <textarea name="description"><%= project.description %></textarea>

  <label>Price:</label>
  <input type="number" name="price" value="<%= project.price %>">

  <label>Completed Work:</label>
  <textarea name="completedWork"><%= project.completedWork %></textarea>

  <label>Start Date:</label>
  <input type="date" name="startDate" value="<%= project.startDate?.toISOString().split('T')[0] %>">

  <label>End Date:</label>
  <input type="date" name="endDate" value="<%= project.endDate?.toISOString().split('T')[0] %>">

  <label>Team Members:</label>
  <select name="teamMembers" multiple size="5">
    <% users.forEach(user => { %>
      <option value="<%= user._id %>" <%= project.teamMembers.some(u => u._id.toString() === user._id.toString()) ? 'selected' : '' %>>
        <%= user.username %>
      </option>
    <% }) %>
  </select>
  <br>

  <label style="margin-top:10px;">
    <input type="checkbox" name="archived" value="true" <%= project.archived ? 'checked' : '' %> >
    Archived
  </label>
  <br>

  <button type="submit" class="btn btn-primary">Save</button>
</form>
